<!-- SECTION Untitled -->
<style>
#menu {
  background-color: black;
  color: white;
}
.item:hover {
  background-color: orange;
}
.item {
  padding-left: 6px;
  padding-right: 10px;
  border-right: solid 1px white;
  cursor: pointer;
}
</style>

<div id="menu">
<span class="item" onclick="menuItemClicked(this)">Ressorts</span>
<span class="item" onclick="menuItemClicked(this)">Vis-Écrou</span>
<span class="item" onclick="menuItemClicked(this)">Pivots</span>
<span class="item" onclick="menuItemClicked(this)">Moteurs</span>
<span class="item" onclick="menuItemClicked(this)">Bearings</span>
</div>

<script defer>
function menuItemClicked(item) {
  console.log('lalalal')
  let siblings = item.parentElement.children;
  for (let i = 0; i < siblings.length; i++) {
    let elem = document.getElementById(siblings[i].innerText)
    if (elem) {elem.style.display = "none";}
  }
  let elem = document.getElementById(item.innerText)
  if (elem) {elem.style.display = "block";}
}
</script>
<!-- SECTION *Untitled -->
<div id="Ressorts">
<h1>Traitement par la chaleur</h1>
Music Wire ASTM A 228 	Closes 	500º F 	30 minutes
<br/>
Source: https://www.acxesspring.com/espanol/how-to-heat-treat-spring-steel.html

<h1>Les ressorts</h1>
<p>Voici un guide de fabrication et d'utilisation des ressorts.</p>
Attention, je dois ajouter des spires parce que les spires qui sont sur les supports de chaque côtés ne sont pas actives...
<h2>Les ressorts de torsion</h2>
<p>
Torsion springs should be deflected in the direction that closes the coils.
<br/><br/>
Double torsion springs can be used when twice the force is required or when you need an even dist    ribution of torque.
<br/><br/>
Usually about 1 extra wind is added so the cable stays in tension.
<br/><br/>
D'habitude, le ressort rétrécit, mais se rallonge. Là il ne peut pas se rallonger... Quelle est l'effet sur le ressort???
</p>
<h3>Les ressorts de torsion cylindriques à spires</h3>

<script>
function calculate() {
  var result = document.getElementById('result')
  result.innerText = ""

  // variables
  var Rm = parseFloat(this.Rm.value)
  var h = parseFloat(this.h.value)
  var Dd = parseFloat(this.Dd.value)
  var nsup = parseFloat(this.nsup.value)
  var F = parseFloat(this.F.value)
  var Nb = parseInt(this.Nb.value)
  var Kf = parseFloat(this.Kf.value)
  var d = parseFloat(this.d.value)
  var E = parseFloat(this.E.value)
  var D_roul = parseFloat(this.D_roul.value)
  var l_max = parseFloat(this.l_max.value)
  var d = parseFloat(this.d.value)
  var N_ina = parseFloat(this.N_ina.value)

  // Calcul de la résistance pratique à l'enroulement
  var Rpe = Rm*0.7

  // Calcul du nombre de tour maximale selon l'espace et la diamètre du fil.
  var N_max = Math.floor(l_max/d)

  // Calcul du diametre d'enroulement centre à centre
  // When the spring is released form the mandrel, it springs back. This is the equation for music wire.
  // source: https://www.daycounter.com/Calculators/Springs/
  // wire 
  var x = 23.57// x is the spring index: D/d, FIXME: Let's approximate to D_roul
  var k = -0.01245*x + 0.98425 // k is the diameter coefficient
  var D = (D_roul + d)/k

  // Calcul de l'angle que le ressort doit effectué pour parcourir la course
  var nbTourATourner = (h/(Dd*3.1416))+nsup
  var alpha = nbTourATourner*2*3.1416

  // Calculs de moments
  var m = (F * 9.81)*(Dd/2)/Nb
  var m_rup = (Rpe*3.1416*Math.pow(d,3))/(Kf*32)

  var d_calc = Math.pow((Kf*32*m)/(Rpe*3.1416),1/3)

  var mom = Math.min(m,m_rup)
  var mom_gen = mom*Nb

  if (m_rup < m) {
    var pourcentage = (mom/m*100).toFixed(1)

    result.innerText += `Le fil choisi est trop petit. Il aurait du mesurer au moins ${d_calc.toFixed(2)} mm pour résister. On continue avec le moment maximale de ${mom_gen.toFixed(1)} N/mm². Seulement ${pourcentage}% du poids de la charge va être compensé.\r\n\r\n`
  } else {
    result.innerText += `Le fil est suffisamment gros pour résister.\r\n\r\n`
  }

  var N = E*Math.pow(d,4)*alpha/(mom*64*D)
  var N_tot = N + N_ina

  // Calcul du diamètre minimale après torsion
  // FIXME: Ca devrait etre le nombre de spires totale et non le nombre de spire active.
  // var D_min = (D*N)/(N+nbTourATourner) FIXME: angle ou nb tour?
  var D_min = (D*N)/(N+alpha)

  var long = D*3.1416*N+100

  result.innerText += `NB. Le diamètre de l'axe doit être plus petit que ${D_min.toFixed(2)} mm.\r\n\r\n`
  
  // Set calculated values
  this.Rpe.value = Rpe.toFixed(2)
  this.alpha.value = alpha.toFixed(2)
  this.m.value = m.toFixed(2)
  this.m_rup.value = m_rup.toFixed(2)
  this.N.value = N.toFixed(2)
  this.N_max.value = N_max
  this.d_calc.value = d_calc.toFixed(2)
  this.D.value = D.toFixed(2)
  this.D_min.value = D_min.toFixed(2)
  this.mom_gen.value = mom_gen.toFixed(2)
  this.long.value = long.toFixed(0)
  this.N_tot.value = N_tot.toFixed(0)
  this.Nb_tour.value = nbTourATourner
}
window.onload = calculate()
</script>

<form id="theForm" oninput="calculate()">
<h4>Données</h4>

d: Diamètre du fil (mm):<input id="d" type="number" value="0.889"><br/>
E: module d'élasticité longitudinal (N/mm<sup>2</sup>)<input id="E" type="number" value="190000"><br/>
Rm: résistance à la tension (N/mm<sup>2</sup>)<input id="Rm" type="number" value="2234"><br/>
Rpe: résistance pratique à l'extension [0.7*Rm] (N/mm<sup>2</sup>)<input id="Rpe" readonly><br/>
Kf: coefficient de concentration de contraintes [f(D/d)]:<input id="Kf" value="1.1" readonly><br/>
M_rup: moment à la résistance pratique [Rpe*π*d³/(32*Kf)] (N.mm):<input id="m_rup" readonly><br/>

<br/>

Nb: Nombre de ressort:<input id="Nb" type="number" value="1"><br/>
l_max: Longueur maximale (mm):<input id="l_max" type="number" value="200"><br/>
N_max: Nombre de tour maximal [l_max/d]:<input id="N_max" type="number" readonly><br/>
N_ina: Nombre de spires inactives:<input id="N_ina" value="6"><br/>
D_roul: Diamètre du mandrin d'enroulement (mm):<input id="D_roul" type="number" value="16"><br/>
D: Diamètre d'enroulement [D+d] (mm):<input id="D" readonly><br/>

<br/>

Dd: Diamètre du tambour d'enroulement (mm):<input id="Dd" type="number" value="66.675"><br/>
F: charge [diviser par 2 si avec poulie] (kg):<input id="F" type="number" value="2"><br/>
M: moment requis par ressort [F*9.81*(Dd/2)/Nb] (N.mm):<input id="m" readonly><br/>

<br />

h: Distance à monter [multiplier par 2 si avec poulie] (mm):<input id="h" type="number" value="2540"><br/>
nsup: Nombre de tour supplémentaire pour garder de la tension:<input id="nsup" type="number" value="1"><br/>
alpha: Angle d'enroulement du ressort [2π*((h/(π*Dd))+nsup)] (radians):<input readonly id="alpha"><br/>

<h4>Résultats</h4>

<div id="result" style="white-space: pre-line;">Résultats...</div><p>

</p>

N: nombre de spires actives:<input id="N" readonly><br/>
N_tot: Nombre de spires totales:<input id="N_tot" readonly><br/>
D_min: diamètre minimale après la torsion:<input id="D_min" readonly><br/>
d_calc: Diamètre du fil (mm):<input id="d_calc" readonly><br/>
mom_gen: Moment généré (N/mm<sup>2</sup>):<input id="mom_gen" readonly><br/>
long: Longueur de fil nécessaire [π*D*N+100](mm):<input id="long" readonly><br/>
Nb_tour: nombre de tour à tourner:<input id="Nb_tour" readonly><br/>
</form>

<p></p>
<h1>Sources</h1>
Guide des sciences et technologies industrielles - Jean-Louis FANCHON
</div>
<!-- SECTION *Untitled -->
<div id="Vis-Écrou">
<h1>Les systèmes vis-écrous</h1>

<p>
EfficiencyBalls screws also offer higher levels of efficiency because rolling contact provides a lower coefficient of friction than sliding contact.  The efficiency of ball screws isrelatively constant and is typically better than 90%.  The efficiency of lead screws, on the other hand, typically ranges between 20% and 80%.  The efficiency of a lead screw is highly dependent upon its helix angle.  As a general rule, higher helix angles mean higher efficiency.  A higher helix angle is more efficientbecause less of the energy used to drive the lead screw goes into overcoming friction.  This is because the number of times the screw must rotate to achieve the same linear displacement is reduced on a high helix screw.  A disadvantage of a high helix angle is that more torqueis required to turn the screw

It’s important to note that when the efficiency of a lead screw exceeds 50%, the lead screw becomes back-drivable, which means it can be driven backwards by the load.

On the other hand, plastic and stainless steel lead screw assembliesaretypicallylimited to a duty cycle of 50% under the rated load.  Lead screw assemblies that use bronze nuts have higher load capacities,but these heavier loads increase frictionalheat so their duty cycles must be lower, often as low as 10%.
</p>
</div>
<!-- SECTION *Untitled -->
<div id="Pivots">
<h1>Les pivots</h1>
<pre>
# Il y a un point A,B et C. Le moteur au point A applique une force au point B
# qui tourne 180 deg autour du point C. Pour que ce soit plus simple, on aligne
# les points a la vertical. Le point A est a 0,0

A = [0,0];
C = [0,10];

n = 30; # Le nombre de points

thetas = [pi/2:pi/n:3*pi/2];
alphas = zeros(1,n+1);
ABX = zeros(1,n+1);
ABY = zeros(1,n+1);
r = 1;

BX = r*cos(thetas);
BY = r*sin(thetas)+C(2);

for i = [1:n+1]
    B = [BX(i),BY(i)];
    AB = B - A;
    CB = B - C;
    ABX(i) = AB(1);
    ABY(i) = AB(2);
    angle1 = atan2d(AB(2),AB(1));
    angle2 = mod(atan2d(CB(2),CB(1)) + 360, 360);
    alphas(i) = mod(angle2 - angle1 + 360, 360);
end

figure
hold on
plot(A(1),A(2))
plot(C(1),C(2))
plot(BX,BY)
xlabel('x')
ylabel('y')
axis([-2  2 -1 12])
title('Position des points')

figure
hold on
plot(linspace(0,180,n+1), sind(alphas))
plot([90 90],[0 1])
axis([0  180 0 1])
title('Angle AB')
</pre>
</div>
<!-- SECTION *Untitled -->
<div id="Moteurs">
<h1>Les moteurs</h1>
Il va probablement falloir que ce soit des servos-moteurs et non des steppers moteurs, parce que avec un servo j'ai le feedback du positionnement, alors je peux détecter s'il y a une anomalie ou une erreur.
</div>
<!-- SECTION Untitled -->
<div id="Bearings">
<h1>Les bearings</h1>
Deep groove ball bearings by nature of their design can carry axial loads either alone or in combination with radial loads. Axial load capacity of standard bearings is 0.5 times the Basic Static Load Rating, CO of that bearing. Smaller bearings should not be subject to a load greater than 0.25 times CO. Excessive axial loads can lead to serious reduction of bearing service life.
</div>